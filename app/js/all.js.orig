<<<<<<< 6e5504205b6e1c00af5c752101287630f0d93d2e

=======
var myModule = (function () {

  // Opens methods
  // Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ Ð½Ð°Ñˆ Ð¼Ð¾Ð´ÑƒÐ»ÑŒ
  var init = function () {
    _setUpListners();
  };

  // Hiden methods
  // ÐŸÑ€Ð¾ÑÐ»ÑƒÑˆÐ¸Ð²Ð°ÐµÑ‚ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ
  var _setUpListners = function () {
    $('#open_popup_button').on('click', _showPopup); // Open Popup window
    $('#add_project').on('submit', _addProject); // Add Project
    $('#fileupload').on('change', _changefileUpload); //Ð´Ð¾Ð±Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð°
    $('#login-form').on('submit', _addProject);
    $('#contact-me').on('submit', _submitForm);
  };

  // Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ñ‹Ð¼ Ð¾ÐºÐ½Ð¾Ð¼ (Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ Ð¸ Ð·Ð°ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚)
  var _showPopup = function(event) {
    event.preventDefault();
    var newPopup = $('#popup_window'),
      form = newPopup.find('.popup_add-form');
    newPopup.bPopup({
      // fadeSpeed: 'slow', //can be a string ('slow'/'fast') or int
      // followSpeed: 'fast', //can be a string ('slow'/'fast') or int
      speed: 300,
      opacity: 0.8,
      modalColor: '#005398',
      transition: 'slideDown',
      onClose: function(event) {
        form.find('.server-mes').text('').hide();
        form.trigger('reset');
      }
    });
  };


  //Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð»Ð¸ Ñ„Ð°Ð¹Ð» Ð°Ð¿Ð»Ð¾Ð°Ð´
  var _changefileUpload = function () {
    var input = $(this), //Ð¸Ð½Ð¿ÑƒÑ‚ type="file"
      filename = input.val(); //Ð¸Ð¼Ñ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ð¾Ð³Ð¾ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚
    filename = getNameFromPath(filename); //ÐŸÐµÑ€ÐµÐ´Ð°ÐµÐ¼ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ input

    // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð° Ð¸Ð· Ð¿ÑƒÑ‚Ð¸
    function getNameFromPath() {
      return filename.replace(/\\/g, '/').replace(/.*\//, ''); //ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð° Ð¸Ð· Ð¿ÑƒÑ‚Ð¸
    }

    // console.log(filename);
    $('#filename')
      .val(filename)
      .trigger('hideTooltip')
      .removeClass('has-error');

  };


  // Contact me and login form
  var _submitForm = function(event){
    // console.log('The submitForm Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ° Ñ„Ð¾Ñ€Ð¼Ñ‹ function');
    event.preventDefault();

    var form = $(this),
        url = 'contactme.php',
        defObj = _ajaxForm(form, url);
        // Ð´Ð°Ð»ÑŒÑˆÐµ Ð±ÑƒÐ´ÐµÐ¼ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ñ Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð¼ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð° defObj
  };

  var _ajaxForm = function(form, url){
    // console.log('The ajaxForm Ð·Ð°Ð¿Ñ€Ð¾Ñ Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¾Ð¹!');
    if (!validation.validateForm(form)) return false;
    // ÐµÑÐ»Ð¸ false Ñ‚Ð¾ ÐºÐ¾Ð´ Ð½Ð¸Ð¶Ðµ Ð½Ðµ ÑÑ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð½Ð¸ÐºÐ¾Ð³Ð´Ð°

  };
  // Contact me and login form END


  // Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ Ð¿Ñ€Ð¾ÐµÐºÑ‚
  var _addProject = function(event) {
    event.preventDefault();

    // the variables
    var form = $(this),
      url = './add_project.php',
      myServerAnsver = _ajaxForm(form, url);

    if (myServerAnsver) {
      myServerAnsver.done(function(ansver) {
        var successBlock = form.find('.success-mes'),
          errorBlock = form.find('.error-mes');
        if (ansver.status === 'OK') {
          errorBlock.text('').hide();
          successBlock.text(ansver.text).show();
        } else {
          successBlock.text('').hide();
          errorBlock.text(ansver.text).show();
        }
      });
    }
  };
  // Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ°Ð»ÑŒÐ½Ð°Ñ Ñ„ÑƒÑ€ÐºÑ†Ð¸Ñ
  // Ð”Ð»Ñ ÐµÑ‘ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð½ÑƒÐ¶Ð½Ñ‹:
  // form - Ñ„Ð¾Ñ€Ð¼Ð°
  // url - Ð°Ð´Ñ€ÐµÑ php Ñ„Ð°Ð¹Ð»Ð°, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ Ñ„Ð¾Ñ€Ð¼Ñ‹
  // 1. Ð¡Ð¾Ð±Ð¸Ñ€Ð°ÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð· Ñ„Ð¾Ñ€Ð¼Ñ‹
  // 2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð¿Ð¾Ð»Ñ Ñ„Ð¾Ñ€Ð¼Ñ‹
  // 3. Ð”ÐµÐ»Ð°ÐµÑ‚ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€ Ð¸ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¾Ñ‚Ð²ÐµÑ‚ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð°
  var _ajaxForm = function(form, url) {
    // if(!valid) return false;
    if (!validation.validateForm(form)) return false;

    data = form.serialize();

    var result = $.ajax({
      url: url,
      type: 'POST',
      dataType: 'json',
      data: data,
    }).fail(function(ansver) {
      // console.log('The Problems in PHP');
      form.find('.error.mes').text('Server returnd ERROR').show();
    });
    return result;
  };
  // Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ Ð¾Ð±ÑŒÐµÐºÑ‚ (Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ Ð¼ÐµÑ‚Ð¾Ð´Ñ‹)
  return {
    init: init
  };

})();

myModule.init();

// validation START
var validation = (function() {

  // Opens methods
  var init = function() {
    _setUpListners();
  };

  // Hiden methods
  var _setUpListners = function() {
    // events
    $('form').on('keydown', '.has-error', _removeError);
    $('form').on('reset', _clearForm);
  };
  var _removeError = function(){
    $(this).removeClass('has-error');
  };
  var _clearForm = function(form){
    var form = $(this);
    form.find('input, textarea').trigger('hideTooltip');
    form.find('.has-error').removeClass('has-error');
  };
  // Create Tooltip
  var _createQtip = function(element, position) {
    // Position of Tooltip
    if (position === 'right') {
      position = {
        my: 'left center',
        at: 'right center'
      }
    } else {
      position = {
        my: 'right center',
        at: 'left center',
        adjust: {
          method: 'shift none'
        }
      }
    }

    // Initialisation of Tooltip
    element.qtip({
      content: {
        text: function() {
          return $(this).attr('qtip-content');
        }
      },
      show: {
        event: 'show'
      },
      hide: {
        event: 'keydown hideTooltip'
      },
      position: position,
      style: {
        classes: 'qtip-mystyle qtip-rounded',
        tip: {
          height: 10,
          weight: 16
        }
      }
    }).trigger('show')
  };

  // Universal function for check form
  var validateForm = function(form) {
    //console.log("This is validateForm function");
    var elements = form.find('input, textarea'), valid = true;

    // ÐŸÑ€Ð¾Ð¹Ð´Ñ‘Ð¼ Ð¿Ð¾ Ð²ÑÐµÐ¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ð¼ Ñ„Ð¾Ñ€Ð¼Ñ‹
    $.each(elements, function(index, val) {
      // console.log(index);
      // console.log(val);
      var element = $(val),
        val = element.val(),
        pos = element.attr('qtip-position');

      if (val.length === 0) {
        element.addClass('has-error');
        _createQtip(element, pos);
        valid = false;
      }
    });

    return valid;

  };

  // Retyrn the Object (publick method)
  return {
    init: init,
    validateForm: validateForm
  };

})();

validation.init();

// validation END


// Input file name in theform file

$(document).ready(function () {

  $(document).on('change', '.popup_add-input-file-upload', function () {

    // Ð¿Ð¾ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸ÑŽ change Ð¸Ð½Ð¿ÑƒÑ‚ Ñ„Ð°Ð¹Ð»Ð°
    var
      $this = $(this),
      val = $this.val(); // Ð±ÐµÑ€ÐµÐ¼ value Ñƒ Ð¸Ð½Ð¿ÑƒÑ‚ Ñ„Ð°Ð¹Ð»Ð° (Ð¿ÑƒÑ‚ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾Ð³Ð¾ Ñ„Ð°Ð¹Ð»Ð°)

    //Ñ‡Ñ‚Ð¾ Ð±Ñ‹ Ð¾Ñ‚Ñ€ÐµÐ·Ð°Ñ‚ÑŒ /fakepath/ (ÑÑ‚Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ ÑÐ°Ð¼ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€)

    var
      regexp = /c:\\fakepath\\/gmi, //Ñ€ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ð¾Ðµ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¿Ð¾Ð¸ÑÐºÐ°
      pureVal = val.replace(regexp, ''); // Ð·Ð°Ð¼ÐµÐ½ÑÐµÐ¼ Ñ‚Ð¾ Ñ‡Ñ‚Ð¾ Ð½Ð°ÑˆÐ»Ð¸ Ð² ÑÑ‚Ñ€Ð¾ÐºÐµ - Ð½Ð° Ð¿ÑƒÑÑ‚Ð¾Ñ‚Ñƒ

    $('.add_fake').text(pureVal); // Ð²ÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼ Ð² Ð±Ð»Ð¾Ðº Ñ Ñ‚ÐµÐºÑÑ‚Ð¾Ð¼ Ð¸Ð¼Ñ Ñ„Ð°Ð¹Ð»Ð°
  });

  // jQuary placeholder view for all browsers
  jQuery('input, textarea').placeholder();

});
>>>>>>> fixed errors 3
